var m=globalThis.Deno?.build.os==="windows"||globalThis.navigator?.platform?.startsWith("Win")||globalThis.process?.platform?.startsWith("win")||!1;function d(e){if(typeof e!="string")throw new TypeError(`Path must be a string, received "${JSON.stringify(e)}"`)}function k(e,t){if(e.length<=1)return e;let r=e.length;for(let i=e.length-1;i>0&&t(e.charCodeAt(i));i--)r=i;return e.slice(0,r)}function A(e){return e===47}function ue(e){return e===47}function u(e){return e===47||e===92}function C(e){return e>=97&&e<=122||e>=65&&e<=90}function B(e){if(d(e),e.length===0)return"."}function he(e){B(e);let t=-1,r=!1;for(let i=e.length-1;i>=1;--i)if(A(e.charCodeAt(i))){if(r){t=i;break}}else r=!0;return t===-1?A(e.charCodeAt(0))?"/":".":k(e.slice(0,t),A)}function me(e){B(e);let t=e.length,r=-1,i=-1,n=!0,o=0,s=e.charCodeAt(0);if(t>1)if(u(s)){if(r=o=1,u(e.charCodeAt(1))){let a=2,l=a;for(;a<t&&!u(e.charCodeAt(a));++a);if(a<t&&a!==l){for(l=a;a<t&&u(e.charCodeAt(a));++a);if(a<t&&a!==l){for(l=a;a<t&&!u(e.charCodeAt(a));++a);if(a===t)return e;a!==l&&(r=o=a+1)}}}}else C(s)&&e.charCodeAt(1)===58&&(r=o=2,t>2&&u(e.charCodeAt(2))&&(r=o=3));else if(u(s))return e;for(let a=t-1;a>=o;--a)if(u(e.charCodeAt(a))){if(!n){i=a;break}}else n=!1;if(i===-1){if(r===-1)return".";i=r}return k(e.slice(0,i),ue)}function ee(e){return m?me(e):he(e)}function de(e){d(e);let t=-1,r=0,i=-1,n=!0,o=0;for(let s=e.length-1;s>=0;--s){let a=e.charCodeAt(s);if(A(a)){if(!n){r=s+1;break}continue}i===-1&&(n=!1,i=s+1),a===46?t===-1?t=s:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||i===-1||o===0||o===1&&t===i-1&&t===r+1?"":e.slice(t,i)}function ge(e){d(e);let t=0,r=-1,i=0,n=-1,o=!0,s=0;e.length>=2&&e.charCodeAt(1)===58&&C(e.charCodeAt(0))&&(t=i=2);for(let a=e.length-1;a>=t;--a){let l=e.charCodeAt(a);if(u(l)){if(!o){i=a+1;break}continue}n===-1&&(o=!1,n=a+1),l===46?r===-1?r=a:s!==1&&(s=1):r!==-1&&(s=-1)}return r===-1||n===-1||s===0||s===1&&r===n-1&&r===i+1?"":e.slice(r,n)}function xe(e){return m?ge(e):de(e)}function W(e){if(d(e),e.length===0)return"."}function N(e,t,r,i){let n="",o=0,s=-1,a=0,l;for(let c=0;c<=e.length;++c){if(c<e.length)l=e.charCodeAt(c);else{if(i(l))break;l=47}if(i(l)){if(!(s===c-1||a===1))if(s!==c-1&&a===2){if(n.length<2||o!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){let f=n.lastIndexOf(r);f===-1?(n="",o=0):(n=n.slice(0,f),o=n.length-1-n.lastIndexOf(r)),s=c,a=0;continue}else if(n.length===2||n.length===1){n="",o=0,s=c,a=0;continue}}t&&(n.length>0?n+=`${r}..`:n="..",o=2)}else n.length>0?n+=r+e.slice(s+1,c):n=e.slice(s+1,c),o=c-s-1;s=c,a=0}else l===46&&a!==-1?++a:a=-1}return n}function K(e){W(e);let t=A(e.charCodeAt(0)),r=A(e.charCodeAt(e.length-1));return e=N(e,!t,"/",A),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?`/${e}`:e}function te(...e){if(e.length===0)return".";e.forEach(r=>d(r));let t=e.filter(r=>r.length>0).join("/");return t===""?".":K(t)}function Y(e){W(e);let t=e.length,r=0,i,n=!1,o=e.charCodeAt(0);if(t>1)if(u(o))if(n=!0,u(e.charCodeAt(1))){let a=2,l=a;for(;a<t&&!u(e.charCodeAt(a));++a);if(a<t&&a!==l){let c=e.slice(l,a);for(l=a;a<t&&u(e.charCodeAt(a));++a);if(a<t&&a!==l){for(l=a;a<t&&!u(e.charCodeAt(a));++a);if(a===t)return`\\\\${c}\\${e.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${e.slice(l,a)}`,r=a)}}}else r=1;else C(o)&&e.charCodeAt(1)===58&&(i=e.slice(0,2),r=2,t>2&&u(e.charCodeAt(2))&&(n=!0,r=3));else if(u(o))return"\\";let s;return r<t?s=N(e.slice(r),!n,"\\",u):s="",s.length===0&&!n&&(s="."),s.length>0&&u(e.charCodeAt(t-1))&&(s+="\\"),i===void 0?n?s.length>0?`\\${s}`:"\\":s:n?s.length>0?`${i}\\${s}`:`${i}\\`:i+s}function re(...e){if(e.forEach(o=>d(o)),e=e.filter(o=>o.length>0),e.length===0)return".";let t=!0,r=0,i=e[0];if(u(i.charCodeAt(0))){++r;let o=i.length;o>1&&u(i.charCodeAt(1))&&(++r,o>2&&(u(i.charCodeAt(2))?++r:t=!1))}let n=e.join("\\");if(t){for(;r<n.length&&u(n.charCodeAt(r));++r);r>=2&&(n=`\\${n.slice(r)}`)}return Y(n)}function Ae(...e){return m?re(...e):te(...e)}function E(e){return e===10||e===13}function R(e){return e===9||e===32}function y(e){return R(e)||E(e)}function P(e){return e===44||e===91||e===93||e===123||e===125}var ne=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Pt(e){if(e===null)return!1;let t,r=0,i=e.length,n=ne;for(let o=0;o<i;o++)if(t=n.indexOf(e.charAt(o)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function Ot(e){let t=e.replace(/[\r\n=]/g,""),r=t.length,i=ne,n=[],o=0;for(let a=0;a<r;a++)a%4===0&&a&&(n.push(o>>16&255),n.push(o>>8&255),n.push(o&255)),o=o<<6|i.indexOf(t.charAt(a));let s=r%4*6;return s===0?(n.push(o>>16&255),n.push(o>>8&255),n.push(o&255)):s===18?(n.push(o>>10&255),n.push(o>>2&255)):s===12&&n.push(o>>4&255),new Uint8Array(n)}function Lt(e){let t=e.length,r=ne,i="",n=0;for(let s=0;s<t;s++)s%3===0&&s&&(i+=r[n>>18&63],i+=r[n>>12&63],i+=r[n>>6&63],i+=r[n&63]),n=(n<<8)+e[s];let o=t%3;return o===0?(i+=r[n>>18&63],i+=r[n>>12&63],i+=r[n>>6&63],i+=r[n&63]):o===2?(i+=r[n>>10&63],i+=r[n>>4&63],i+=r[n<<2&63],i+=r[64]):o===1&&(i+=r[n>>2&63],i+=r[n<<4&63],i+=r[64],i+=r[64]),i}function Nt(e){return e instanceof Uint8Array}var Ee={tag:"tag:yaml.org,2002:binary",construct:Ot,kind:"scalar",predicate:Nt,represent:Lt,resolve:Pt};var be=["true","True","TRUE"],It=["false","False","FALSE"],Mt=[...be,...It],Ce={tag:"tag:yaml.org,2002:bool",kind:"scalar",defaultStyle:"lowercase",predicate:e=>typeof e=="boolean"||e instanceof Boolean,construct:e=>be.includes(e),resolve:e=>Mt.includes(e),represent:{lowercase:e=>(e instanceof Boolean?e.valueOf():e)?"true":"false",uppercase:e=>(e instanceof Boolean?e.valueOf():e)?"TRUE":"FALSE",camelcase:e=>(e instanceof Boolean?e.valueOf():e)?"True":"False"}};function ie(e){return e!==null&&typeof e=="object"}function M(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}function O(e){return Object.prototype.toString.call(e)==="[object Object]"}var vt=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Dt(e){return!(!vt.test(e)||e[e.length-1]==="_")}function Ht(e){let t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1;return t[0]&&"+-".includes(t[0])&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t)}var $t=/^[-+]?[0-9]+e/;function Ft(e,t){let r=e instanceof Number?e.valueOf():e;if(isNaN(r))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===r)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===r)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(M(r))return"-0.0";let i=r.toString(10);return $t.test(i)?i.replace("e",".e"):i}function Ut(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&(e%1!==0||M(e))}var Se={tag:"tag:yaml.org,2002:float",construct:Ht,defaultStyle:"lowercase",kind:"scalar",predicate:Ut,represent:Ft,resolve:Dt};function v(e,t,r){return t<=e&&e<=r}function Gt(e){return v(e,48,57)||v(e,65,70)||v(e,97,102)}function Bt(e){return v(e,48,55)}function Wt(e){return v(e,48,57)}function Kt(e){let t=e.length,r=0,i=!1;if(!t)return!1;let n=e[r];if((n==="-"||n==="+")&&(n=e[++r]),n==="0"){if(r+1===t)return!0;if(n=e[++r],n==="b"){for(r++;r<t;r++)if(n=e[r],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(r++;r<t;r++)if(n=e[r],n!=="_"){if(!Gt(e.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}for(;r<t;r++)if(n=e[r],n!=="_"){if(!Bt(e.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}if(n==="_")return!1;for(;r<t;r++)if(n=e[r],n!=="_"){if(!Wt(e.charCodeAt(r)))return!1;i=!0}return!i||n==="_"?!1:/^(:[0-5]?[0-9])+$/.test(e.slice(r))}function Yt(e){let t=e;t.includes("_")&&(t=t.replace(/_/g,""));let r=1,i=t[0];return(i==="-"||i==="+")&&(i==="-"&&(r=-1),t=t.slice(1),i=t[0]),t==="0"?0:i==="0"?t[1]==="b"?r*parseInt(t.slice(2),2):t[1]==="x"?r*parseInt(t,16):r*parseInt(t,8):r*parseInt(t,10)}function jt(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&e%1===0&&!M(e)}var we={tag:"tag:yaml.org,2002:int",construct:Yt,defaultStyle:"decimal",kind:"scalar",predicate:jt,represent:{binary(e){let t=e instanceof Number?e.valueOf():e;return t>=0?`0b${t.toString(2)}`:`-0b${t.toString(2).slice(1)}`},octal(e){let t=e instanceof Number?e.valueOf():e;return t>=0?`0${t.toString(8)}`:`-0${t.toString(8).slice(1)}`},decimal(e){return(e instanceof Number?e.valueOf():e).toString(10)},hexadecimal(e){let t=e instanceof Number?e.valueOf():e;return t>=0?`0x${t.toString(16).toUpperCase()}`:`-0x${t.toString(16).toUpperCase().slice(1)}`}},resolve:Kt};var Re={tag:"tag:yaml.org,2002:map",resolve(){return!0},construct(e){return e!==null?e:{}},kind:"mapping"};var Te={tag:"tag:yaml.org,2002:merge",kind:"scalar",resolve:e=>e==="<<"||e===null,construct:e=>e};var _e={tag:"tag:yaml.org,2002:null",kind:"scalar",defaultStyle:"lowercase",predicate:e=>e===null,construct:()=>null,resolve:e=>e==="~"||e==="null"||e==="Null"||e==="NULL",represent:{lowercase:()=>"null",uppercase:()=>"NULL",camelcase:()=>"Null"}};function zt(e){let t=new Set;for(let r of e){if(!O(r))return!1;let i=Object.keys(r);if(i.length!==1)return!1;for(let n of i){if(t.has(n))return!1;t.add(n)}}return!0}var ke={tag:"tag:yaml.org,2002:omap",kind:"sequence",resolve:zt,construct(e){return e}};function qt(e){return e===null?!0:e.every(t=>O(t)&&Object.keys(t).length===1)}var Pe={tag:"tag:yaml.org,2002:pairs",construct(e){return e?.flatMap(Object.entries)??[]},kind:"sequence",resolve:qt};var Oe=/^\/(?<regexp>[\s\S]+)\/(?<modifiers>[gismuy]*)$/,Le={tag:"tag:yaml.org,2002:js/regexp",kind:"scalar",resolve(e){if(e===null||!e.length)return!1;if(e.charAt(0)==="/"){let t=e.match(Oe)?.groups;if(!t)return!1;let r=t.modifiers??"";if(new Set(r).size<r.length)return!1}return!0},construct(e){let{regexp:t=e,modifiers:r=""}=e.match(Oe)?.groups??{};return new RegExp(t,r)},predicate:e=>e instanceof RegExp,represent:e=>e.toString()};var Ne={tag:"tag:yaml.org,2002:seq",kind:"sequence",resolve:()=>!0,construct:e=>e!==null?e:[]};var Ie={tag:"tag:yaml.org,2002:set",kind:"mapping",construct:e=>e!==null?e:{},resolve:e=>e===null?!0:Object.values(e).every(t=>t===null)};var Me={tag:"tag:yaml.org,2002:str",kind:"scalar",resolve:()=>!0,construct:e=>e!==null?e:""};var ve=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),De=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Qt(e){return e===null?!1:ve.exec(e)!==null||De.exec(e)!==null}function Vt(e){let t=ve.exec(e);if(t===null&&(t=De.exec(e)),t===null)throw new Error("Cannot construct YAML timestamp: date resolve error");let r=+t[1],i=+t[2]-1,n=+t[3];if(!t[4])return new Date(Date.UTC(r,i,n));let o=+t[4],s=+t[5],a=+t[6],l=0;if(t[7]){let p=t[7].slice(0,3);for(;p.length<3;)p+="0";l=+p}let c=null;if(t[9]&&t[10]){let p=+t[10],h=+(t[11]||0);c=(p*60+h)*6e4,t[9]==="-"&&(c=-c)}let f=new Date(Date.UTC(r,i,n,o,s,a,l));return c&&f.setTime(f.getTime()-c),f}function Xt(e){return e.toISOString()}var He={tag:"tag:yaml.org,2002:timestamp",construct:Vt,predicate(e){return e instanceof Date},kind:"scalar",represent:Xt,resolve:Qt};var $e={tag:"tag:yaml.org,2002:js/undefined",kind:"scalar",resolve(){return!0},construct(){},predicate(e){return typeof e>"u"},represent(){return""}};function Zt(e,t){let r={fallback:new Map,mapping:new Map,scalar:new Map,sequence:new Map},i=r.fallback;for(let n of[...e,...t])r[n.kind].set(n.tag,n),i.set(n.tag,n);return r}function D({explicitTypes:e=[],implicitTypes:t=[],include:r}){r&&(t.push(...r.implicitTypes),e.push(...r.explicitTypes));let i=Zt(t,e);return{implicitTypes:t,explicitTypes:e,typeMap:i}}var Fe=D({explicitTypes:[Me,Ne,Re]}),Ue=D({implicitTypes:[_e,Ce,we,Se],include:Fe}),Ge=D({include:Ue}),H=D({explicitTypes:[Ee,ke,Pe,Ie],implicitTypes:[He,Te],include:Ge}),Jt=D({explicitTypes:[Le,$e],include:H}),oe=new Map([["core",Ge],["default",H],["failsafe",Fe],["json",Ue],["extended",Jt]]);var j=1,je=2,ze=3,z=4,se=1,rr=2,qe=3,nr=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ir=/[\x85\u2028\u2029]/,or=/[,\[\]\{\}]/,Qe=/^(?:!|!!|![a-z\-]+!)$/i,Ve=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i,sr=new Map([[120,2],[117,4],[85,8]]),Xe=new Map([[48,"\0"],[97,"\x07"],[98,"\b"],[116,"	"],[9,"	"],[110,`
`],[118,"\v"],[102,"\f"],[114,"\r"],[101,"\x1B"],[32," "],[34,'"'],[47,"/"],[92,"\\"],[78,"\x85"],[95,"\xA0"],[76,"\u2028"],[80,"\u2029"]]);function ar(e){if(48<=e&&e<=57)return e-48;let t=e|32;return 97<=t&&t<=102?t-97+10:-1}function lr(e){return 48<=e&&e<=57?e-48:-1}function cr(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Ze=4,Je=75,et=`\0\r
\x85\u2028\u2029`;function fr(e,t){if(!e)return null;let r=t,i=t,n="",o="";for(;r>0&&!et.includes(e.charAt(r-1));)if(r--,t-r>Je/2-1){n=" ... ",r+=5;break}for(;i<e.length&&!et.includes(e.charAt(i));)if(i++,i-t>Je/2-1){o=" ... ",i-=5;break}let s=e.slice(r,i),a=" ".repeat(Ze),l=" ".repeat(Ze+t-r+n.length);return`${a+n+s+o}
${l}^`}function pr(e,t,r,i){let n=`at line ${r+1}, column ${i+1}`,o=fr(e,t);return o&&(n+=`:
${o}`),n}var X=class{input;length;lineIndent=0;lineStart=0;position=0;line=0;onWarning;allowDuplicateKeys;implicitTypes;typeMap;version;checkLineBreaks=!1;tagMap=new Map;anchorMap=new Map;tag;anchor;kind;result="";constructor(t,{schema:r=H,onWarning:i,allowDuplicateKeys:n=!1}){this.input=t,this.onWarning=i,this.allowDuplicateKeys=n,this.implicitTypes=r.implicitTypes,this.typeMap=r.typeMap,this.length=t.length,this.version=null,this.readIndent()}readIndent(){let t=this.peek();for(;t===32;)this.lineIndent+=1,t=this.next()}peek(t=0){return this.input.charCodeAt(this.position+t)}next(){return this.position+=1,this.peek()}#e(t){let r=pr(this.input,this.position,this.line,this.position-this.lineStart);return new SyntaxError(`${t} ${r}`)}throwError(t){throw this.#e(t)}dispatchWarning(t){let r=this.#e(t);this.onWarning?.(r)}yamlDirectiveHandler(...t){if(this.version!==null)return this.throwError("Cannot handle YAML directive: duplication of %YAML directive");if(t.length!==1)return this.throwError("Cannot handle YAML directive: YAML directive accepts exactly one argument");let r=/^([0-9]+)\.([0-9]+)$/.exec(t[0]);if(r===null)return this.throwError("Cannot handle YAML directive: ill-formed argument");let i=parseInt(r[1],10),n=parseInt(r[2],10);if(i!==1)return this.throwError("Cannot handle YAML directive: unacceptable YAML version");if(this.version=t[0]??null,this.checkLineBreaks=n<2,n!==1&&n!==2)return this.dispatchWarning("Cannot handle YAML directive: unsupported YAML version")}tagDirectiveHandler(...t){if(t.length!==2)return this.throwError(`Cannot handle tag directive: directive accepts exactly two arguments, received ${t.length}`);let r=t[0],i=t[1];if(!Qe.test(r))return this.throwError(`Cannot handle tag directive: ill-formed handle (first argument) in "${r}"`);if(this.tagMap.has(r))return this.throwError(`Cannot handle tag directive: previously declared suffix for "${r}" tag handle`);if(!Ve.test(i))return this.throwError("Cannot handle tag directive: ill-formed tag prefix (second argument) of the TAG directive");this.tagMap.set(r,i)}captureSegment(t,r,i){let n;if(t<r){if(n=this.input.slice(t,r),i)for(let o=0;o<n.length;o++){let s=n.charCodeAt(o);if(!(s===9||32<=s&&s<=1114111))return this.throwError(`Expected valid JSON character: received "${s}"`)}else if(nr.test(n))return this.throwError("Stream contains non-printable characters");this.result+=n}}readBlockSequence(t){let r,i,n=!1,o,s=this.tag,a=this.anchor,l=[];for(this.anchor!==null&&typeof this.anchor<"u"&&this.anchorMap.set(this.anchor,l),o=this.peek();o!==0&&!(o!==45||(i=this.peek(1),!y(i)));){if(n=!0,this.position++,this.skipSeparationSpace(!0,-1)&&this.lineIndent<=t){l.push(null),o=this.peek();continue}if(r=this.line,this.composeNode(t,ze,!1,!0),l.push(this.result),this.skipSeparationSpace(!0,-1),o=this.peek(),(this.line===r||this.lineIndent>t)&&o!==0)return this.throwError("Cannot read block sequence: bad indentation of a sequence entry");if(this.lineIndent<t)break}return n?(this.tag=s,this.anchor=a,this.kind="sequence",this.result=l,!0):!1}mergeMappings(t,r,i){if(!ie(r))return this.throwError("Cannot merge mappings: the provided source object is unacceptable");for(let[n,o]of Object.entries(r))Object.hasOwn(t,n)||(Object.defineProperty(t,n,{value:o,writable:!0,enumerable:!0,configurable:!0}),i.add(n))}storeMappingPair(t,r,i,n,o,s,a){if(Array.isArray(n)){n=Array.prototype.slice.call(n);for(let l=0;l<n.length;l++){if(Array.isArray(n[l]))return this.throwError("Cannot store mapping pair: nested arrays are not supported inside keys");typeof n=="object"&&O(n[l])&&(n[l]="[object Object]")}}if(typeof n=="object"&&O(n)&&(n="[object Object]"),n=String(n),i==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(let l=0;l<o.length;l++)this.mergeMappings(t,o[l],r);else this.mergeMappings(t,o,r);else{if(!this.allowDuplicateKeys&&!r.has(n)&&Object.hasOwn(t,n))return this.line=s||this.line,this.position=a||this.position,this.throwError("Cannot store mapping pair: duplicated key");Object.defineProperty(t,n,{value:o,writable:!0,enumerable:!0,configurable:!0}),r.delete(n)}return t}readLineBreak(){let t=this.peek();if(t===10)this.position++;else if(t===13)this.position++,this.peek()===10&&this.position++;else return this.throwError("Cannot read line: line break not found");this.line+=1,this.lineStart=this.position}skipSeparationSpace(t,r){let i=0,n=this.peek();for(;n!==0;){for(;R(n);)n=this.next();if(t&&n===35)do n=this.next();while(n!==10&&n!==13&&n!==0);if(E(n))this.readLineBreak(),n=this.peek(),i++,this.lineIndent=0,this.readIndent(),n=this.peek();else break}return r!==-1&&i!==0&&this.lineIndent<r&&this.dispatchWarning("deficient indentation"),i}testDocumentSeparator(){let t=this.peek();return!!((t===45||t===46)&&t===this.peek(1)&&t===this.peek(2)&&(t=this.peek(3),t===0||y(t)))}writeFoldedLines(t){t===1?this.result+=" ":t>1&&(this.result+=`
`.repeat(t-1))}readPlainScalar(t,r){let i=this.kind,n=this.result,o=this.peek();if(y(o)||P(o)||o===35||o===38||o===42||o===33||o===124||o===62||o===39||o===34||o===37||o===64||o===96)return!1;let s;if((o===63||o===45)&&(s=this.peek(1),y(s)||r&&P(s)))return!1;this.kind="scalar",this.result="";let a=this.position,l=this.position,c=!1,f=0;for(;o!==0;){if(o===58){if(s=this.peek(1),y(s)||r&&P(s))break}else if(o===35){let p=this.peek(-1);if(y(p))break}else{if(this.position===this.lineStart&&this.testDocumentSeparator()||r&&P(o))break;if(E(o)){f=this.line;let p=this.lineStart,h=this.lineIndent;if(this.skipSeparationSpace(!1,-1),this.lineIndent>=t){c=!0,o=this.peek();continue}else{this.position=a,this.line=f,this.lineStart=p,this.lineIndent=h;break}}}c&&(this.captureSegment(l,a,!1),this.writeFoldedLines(this.line-f),l=a=this.position,c=!1),R(o)||(a=this.position+1),o=this.next()}return this.captureSegment(l,a,!1),this.result?!0:(this.kind=i,this.result=n,!1)}readSingleQuotedScalar(t){let r,i,n;if(r=this.peek(),r!==39)return!1;for(this.kind="scalar",this.result="",this.position++,i=n=this.position;(r=this.peek())!==0;)if(r===39)if(this.captureSegment(i,this.position,!0),r=this.next(),r===39)i=this.position,this.position++,n=this.position;else return!0;else if(E(r))this.captureSegment(i,n,!0),this.writeFoldedLines(this.skipSeparationSpace(!1,t)),i=n=this.position;else{if(this.position===this.lineStart&&this.testDocumentSeparator())return this.throwError("Unexpected end of the document within a single quoted scalar");this.position++,n=this.position}return this.throwError("Unexpected end of the stream within a single quoted scalar")}readDoubleQuotedScalar(t){let r=this.peek();if(r!==34)return!1;this.kind="scalar",this.result="",this.position++;let i=this.position,n=this.position,o;for(;(r=this.peek())!==0;){if(r===34)return this.captureSegment(n,this.position,!0),this.position++,!0;if(r===92){if(this.captureSegment(n,this.position,!0),r=this.next(),E(r))this.skipSeparationSpace(!1,t);else if(r<256&&Xe.has(r))this.result+=Xe.get(r),this.position++;else if((o=sr.get(r)??0)>0){let s=o,a=0;for(;s>0;s--)if(r=this.next(),(o=ar(r))>=0)a=(a<<4)+o;else return this.throwError("Cannot read double quoted scalar: expected hexadecimal character");this.result+=cr(a),this.position++}else return this.throwError("Cannot read double quoted scalar: unknown escape sequence");n=i=this.position}else if(E(r))this.captureSegment(n,i,!0),this.writeFoldedLines(this.skipSeparationSpace(!1,t)),n=i=this.position;else{if(this.position===this.lineStart&&this.testDocumentSeparator())return this.throwError("Unexpected end of the document within a double quoted scalar");this.position++,i=this.position}}return this.throwError("Unexpected end of the stream within a double quoted scalar")}readFlowCollection(t){let r=this.peek(),i,n=!0,o={};if(r===91)i=93,n=!1,o=[];else if(r===123)i=125;else return!1;this.anchor!==null&&typeof this.anchor<"u"&&this.anchorMap.set(this.anchor,o),r=this.next();let s=this.tag,a=this.anchor,l=!0,c=null,f=null,p=null,h=!1,b=!1,g=0,T=0,x=new Set;for(;r!==0;){if(this.skipSeparationSpace(!0,t),r=this.peek(),r===i)return this.position++,this.tag=s,this.anchor=a,this.kind=n?"mapping":"sequence",this.result=o,!0;if(!l)return this.throwError("Cannot read flow collection: missing comma between flow collection entries");p=f=c=null,b=h=!1,r===63&&(g=this.peek(1),y(g)&&(b=h=!0,this.position++,this.skipSeparationSpace(!0,t))),T=this.line,this.composeNode(t,j,!1,!0),p=this.tag||null,f=this.result,this.skipSeparationSpace(!0,t),r=this.peek(),(h||this.line===T)&&r===58&&(b=!0,r=this.next(),this.skipSeparationSpace(!0,t),this.composeNode(t,j,!1,!0),c=this.result),n?this.storeMappingPair(o,x,p,f,c):b?o.push(this.storeMappingPair({},x,p,f,c)):o.push(f),this.skipSeparationSpace(!0,t),r=this.peek(),r===44?(l=!0,r=this.next()):l=!1}return this.throwError("Cannot read flow collection: unexpected end of the stream within a flow collection")}readBlockScalar(t){let r=se,i=!1,n=!1,o=t,s=0,a=!1,l=this.peek(),c=!1;if(l===124)c=!1;else if(l===62)c=!0;else return!1;this.kind="scalar",this.result="";let f=0;for(;l!==0;)if(l=this.next(),l===43||l===45)if(se===r)r=l===43?qe:rr;else return this.throwError("Cannot read block: chomping mode identifier repeated");else if((f=lr(l))>=0){if(f===0)return this.throwError("Cannot read block: indentation width must be greater than 0");if(!n)o=t+f-1,n=!0;else return this.throwError("Cannot read block: indentation width identifier repeated")}else break;if(R(l)){do l=this.next();while(R(l));if(l===35)do l=this.next();while(!E(l)&&l!==0)}for(;l!==0;){for(this.readLineBreak(),this.lineIndent=0,l=this.peek();(!n||this.lineIndent<o)&&l===32;)this.lineIndent++,l=this.next();if(!n&&this.lineIndent>o&&(o=this.lineIndent),E(l)){s++;continue}if(this.lineIndent<o){r===qe?this.result+=`
`.repeat(i?1+s:s):r===se&&i&&(this.result+=`
`);break}c?R(l)?(a=!0,this.result+=`
`.repeat(i?1+s:s)):a?(a=!1,this.result+=`
`.repeat(s+1)):s===0?i&&(this.result+=" "):this.result+=`
`.repeat(s):this.result+=`
`.repeat(i?1+s:s),i=!0,n=!0,s=0;let p=this.position;for(;!E(l)&&l!==0;)l=this.next();this.captureSegment(p,this.position,!1)}return!0}readBlockMapping(t,r){let i=this.tag,n=this.anchor,o={},s=new Set,a,l=!1,c,f,p=null,h=null,b=null,g=!1,T=!1,x;for(this.anchor!==null&&typeof this.anchor<"u"&&this.anchorMap.set(this.anchor,o),x=this.peek();x!==0;){if(a=this.peek(1),c=this.line,f=this.position,(x===63||x===58)&&y(a)){if(x===63)g&&(this.storeMappingPair(o,s,p,h,null),p=h=b=null),T=!0,g=!0,l=!0;else if(g)g=!1,l=!0;else return this.throwError("Cannot read block as explicit mapping pair is incomplete: a key node is missed or followed by a non-tabulated empty line");this.position+=1,x=a}else if(this.composeNode(r,je,!1,!0))if(this.line===c){for(x=this.peek();R(x);)x=this.next();if(x===58){if(x=this.next(),!y(x))return this.throwError("Cannot read block: a whitespace character is expected after the key-value separator within a block mapping");g&&(this.storeMappingPair(o,s,p,h,null),p=h=b=null),T=!0,g=!1,l=!1,p=this.tag,h=this.result}else return T?this.throwError("Cannot read an implicit mapping pair: missing colon"):(this.tag=i,this.anchor=n,!0)}else return T?this.throwError("Cannot read a block mapping entry: a multiline key may not be an implicit key"):(this.tag=i,this.anchor=n,!0);else break;if((this.line===c||this.lineIndent>t)&&(this.composeNode(t,z,!0,l)&&(g?h=this.result:b=this.result),g||(this.storeMappingPair(o,s,p,h,b,c,f),p=h=b=null),this.skipSeparationSpace(!0,-1),x=this.peek()),this.lineIndent>t&&x!==0)return this.throwError("Cannot read block: bad indentation of a mapping entry");if(this.lineIndent<t)break}return g&&this.storeMappingPair(o,s,p,h,null),T&&(this.tag=i,this.anchor=n,this.kind="mapping",this.result=o),T}readTagProperty(){let t,r=!1,i=!1,n="",o,s;if(s=this.peek(),s!==33)return!1;if(this.tag!==null)return this.throwError("Cannot read tag property: duplication of a tag property");if(s=this.next(),s===60?(r=!0,s=this.next()):s===33?(i=!0,n="!!",s=this.next()):n="!",t=this.position,r){do s=this.next();while(s!==0&&s!==62);if(this.position<this.length)o=this.input.slice(t,this.position),s=this.next();else return this.throwError("Cannot read tag property: unexpected end of stream")}else{for(;s!==0&&!y(s);){if(s===33){if(i)return this.throwError("Cannot read tag property: tag suffix cannot contain an exclamation mark");if(n=this.input.slice(t-1,this.position+1),!Qe.test(n))return this.throwError("Cannot read tag property: named tag handle contains invalid characters");i=!0,t=this.position+1}s=this.next()}if(o=this.input.slice(t,this.position),or.test(o))return this.throwError("Cannot read tag property: tag suffix cannot contain flow indicator characters")}if(o&&!Ve.test(o))return this.throwError(`Cannot read tag property: invalid characters in tag name "${o}"`);if(r)this.tag=o;else if(this.tagMap.has(n))this.tag=this.tagMap.get(n)+o;else if(n==="!")this.tag=`!${o}`;else if(n==="!!")this.tag=`tag:yaml.org,2002:${o}`;else return this.throwError(`Cannot read tag property: undeclared tag handle "${n}"`);return!0}readAnchorProperty(){let t=this.peek();if(t!==38)return!1;if(this.anchor!==null)return this.throwError("Cannot read anchor property: duplicate anchor property");t=this.next();let r=this.position;for(;t!==0&&!y(t)&&!P(t);)t=this.next();return this.position===r?this.throwError("Cannot read anchor property: name of an anchor node must contain at least one character"):(this.anchor=this.input.slice(r,this.position),!0)}readAlias(){if(this.peek()!==42)return!1;let t=this.next(),r=this.position;for(;t!==0&&!y(t)&&!P(t);)t=this.next();if(this.position===r)return this.throwError("Cannot read alias: alias name must contain at least one character");let i=this.input.slice(r,this.position);return this.anchorMap.has(i)?(this.result=this.anchorMap.get(i),this.skipSeparationSpace(!0,-1),!0):this.throwError(`Cannot read alias: unidentified alias "${i}"`)}composeNode(t,r,i,n){let o,s,a=1,l=!1,c=!1,f,p,h;this.tag=null,this.anchor=null,this.kind=null,this.result=null;let b=o=s=z===r||ze===r;if(i&&this.skipSeparationSpace(!0,-1)&&(l=!0,this.lineIndent>t?a=1:this.lineIndent===t?a=0:this.lineIndent<t&&(a=-1)),a===1)for(;this.readTagProperty()||this.readAnchorProperty();)this.skipSeparationSpace(!0,-1)?(l=!0,s=b,this.lineIndent>t?a=1:this.lineIndent===t?a=0:this.lineIndent<t&&(a=-1)):s=!1;if(s&&(s=l||n),a===1||z===r)if(p=j===r||je===r?t:t+1,h=this.position-this.lineStart,a===1)if(s&&(this.readBlockSequence(h)||this.readBlockMapping(h,p))||this.readFlowCollection(p))c=!0;else{if(o&&this.readBlockScalar(p)||this.readSingleQuotedScalar(p)||this.readDoubleQuotedScalar(p))c=!0;else if(this.readAlias()){if(c=!0,this.tag!==null||this.anchor!==null)return this.throwError("Cannot compose node: alias node should not have any properties")}else this.readPlainScalar(p,j===r)&&(c=!0,this.tag===null&&(this.tag="?"));this.anchor!==null&&this.anchorMap.set(this.anchor,this.result)}else a===0&&(c=s&&this.readBlockSequence(h));if(this.tag!==null&&this.tag!=="!")if(this.tag==="?"){for(let g=0;g<this.implicitTypes.length;g++)if(f=this.implicitTypes[g],f.resolve(this.result)){this.result=f.construct(this.result),this.tag=f.tag,this.anchor!==null&&this.anchorMap.set(this.anchor,this.result);break}}else if(this.typeMap[this.kind??"fallback"].has(this.tag)){if(f=this.typeMap[this.kind??"fallback"].get(this.tag),this.result!==null&&f.kind!==this.kind)return this.throwError(`Unacceptable node kind for !<${this.tag}> tag: it should be "${f.kind}", not "${this.kind}"`);if(f.resolve(this.result))this.result=f.construct(this.result),this.anchor!==null&&this.anchorMap.set(this.anchor,this.result);else return this.throwError(`Cannot resolve a node with !<${this.tag}> explicit tag`)}else return this.throwError(`Cannot resolve unknown tag !<${this.tag}>`);return this.tag!==null||this.anchor!==null||c}readDocument(){let t=this.position,r,i,n,o=!1,s;for(this.version=null,this.checkLineBreaks=!1,this.tagMap=new Map,this.anchorMap=new Map;(s=this.peek())!==0&&(this.skipSeparationSpace(!0,-1),s=this.peek(),!(this.lineIndent>0||s!==37));){for(o=!0,s=this.next(),r=this.position;s!==0&&!y(s);)s=this.next();if(i=this.input.slice(r,this.position),n=[],i.length<1)return this.throwError("Cannot read document: directive name length must be greater than zero");for(;s!==0;){for(;R(s);)s=this.next();if(s===35){do s=this.next();while(s!==0&&!E(s));break}if(E(s))break;for(r=this.position;s!==0&&!y(s);)s=this.next();n.push(this.input.slice(r,this.position))}switch(s!==0&&this.readLineBreak(),i){case"YAML":this.yamlDirectiveHandler(...n);break;case"TAG":this.tagDirectiveHandler(...n);break;default:this.dispatchWarning(`unknown document directive "${i}"`);break}}if(this.skipSeparationSpace(!0,-1),this.lineIndent===0&&this.peek()===45&&this.peek(1)===45&&this.peek(2)===45)this.position+=3,this.skipSeparationSpace(!0,-1);else if(o)return this.throwError("Cannot read document: directives end mark is expected");if(this.composeNode(this.lineIndent-1,z,!1,!0),this.skipSeparationSpace(!0,-1),this.checkLineBreaks&&ir.test(this.input.slice(t,this.position))&&this.dispatchWarning("non-ASCII line breaks are interpreted as content"),this.position===this.lineStart&&this.testDocumentSeparator())this.peek()===46&&(this.position+=3,this.skipSeparationSpace(!0,-1));else if(this.position<this.length-1)return this.throwError("Cannot read document: end of the stream or a document separator is expected");return this.result}*readDocuments(){for(;this.position<this.length-1;)yield this.readDocument()}};function ur(e){return e=String(e),e.length>0&&(E(e.charCodeAt(e.length-1))||(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1))),e+="\0",e}function lt(e,t={}){e=ur(e);let i=new X(e,{...t,schema:oe.get(t.schema)}).readDocuments(),n=i.next().value;if(!i.next().done)throw new SyntaxError("Found more than 1 document in the stream: expected a single document");return n??null}var mr=e=>{let t=lt(Deno.readTextFileSync(e));return typeof t=="object"&&t!==null?t:{}},pe=(e,t)=>{let r=Array.isArray(e)?[]:{};for(let[i,n]of Object.entries(e))if(i==="$ref"&&typeof n=="string"&&xe(n)===".yaml"&&!Array.isArray(e)){let o=Ae(t,n);r={...r,...pe(mr(o),ee(o))}}else r[Array.isArray(e)?Number(i):i]=typeof n=="object"&&n!==null?pe(n,t):n;return r},Z=(e,t)=>Array.isArray(e)?e.map(r=>Z(r,t)):Object.fromEntries(Object.entries(e).map(([r,i])=>typeof i=="object"&&i!==null?[r,r==="examples"?pe(i,t):Z(i,t)]:[r,i])),ct=()=>({Operation:{leave(e,t){let r=ee(t.location.source.absoluteRef);e.requestBody&&(e.requestBody=Z(e.requestBody,r)),e.responses&&(e.responses=Z(e.responses,r))}}});var dr={"bundle-examples":ct},gr=()=>({id:"my",preprocessors:{oas3:dr}}),ol=gr;export{ol as default,dr as preprocessors};
